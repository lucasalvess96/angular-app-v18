<main fxLayout="column" fxLayoutAlign="space-evely start" [style.margin-left.rem]="1">
  <app-spinner-component [loading]="loading" [message]="message" />

  <div class="filter-container">
    <mat-form-field appearance="fill">
      <mat-label>Filter</mat-label>
      <input matInput placeholder="Ex. Mia" #input autocomplete="off" />
    </mat-form-field>

    <button type="button" mat-flat-button color="primary" (click)="applyFilter(input.value)">
      <mat-icon class="mat-18">search</mat-icon>
      Buscar
    </button>

    <button type="button" mat-stroked-button color="accent" (click)="clearFilter(input)">
      <mat-icon class="mat-18">close</mat-icon>
      Limpar
    </button>
  </div>

  <app-table-component
    *ngIf="dataSource$ | async as data"
    [dataSource]="data"
    [displayedColumns]="displayedColumns"
    [actions]="actionsTamplate"
    [customTemplates]="{ cpf: cpfCustom }"
    [paginationControl]="paginationControl"
    (pageChange)="paginationChange$.next()"
    (sortChange)="paginationChange$.next()"
  />

  <ng-template #cpfCustom let-row>
    {{ row.cpf | cpfMask }}
  </ng-template>

  <ng-template #actionsTamplate let-row>
    <div class="actions-container">
      <button
        mat-button
        type="button"
        mat-flat-button
        color="primary"
        title="informações detalhadas"
        [routerLink]="['/person-home/detail', row.id]"
      >
        Detalhes
      </button>

      <button
        type="button"
        [title]="'edit data'"
        mat-icon-button
        color="accent"
        [routerLink]="['/person-home/edit', row.id]"
      >
        <mat-icon>edit</mat-icon>
      </button>
    </div>
  </ng-template>

  <mat-card-actions>
    <button
      mat-raised-button
      color="accent"
      routerLink="../welcome"
      routerLinkActive="active"
      ariaCurrentWhenActive="page"
      [style.margin-left.rem]="1"
      [style.margin-top.rem]="1"
    >
      <mat-icon>arrow_back</mat-icon>
      Home
    </button>
  </mat-card-actions>
</main>
